function showAlert(e,t){$("#alert-box").removeClass("alert-error").removeClass("alert-success").addClass(e).text(t).show();if($(".pin-div").length>0){$(".pin-div").val("").removeClass("loading").hide()}lockKeyPad=true;setTimeout(function(){$("#alert-box").hide();if($(".pin-div").length>0){$(".pin-div").show()}lockKeyPad=false},2e3)}function triggerOpen(){lockKeyPad=true;var e=$(".pin-div").val();$(".pin-div").addClass("loading");if(e.length!=pinLength){showAlert("alert-error","Door PIN is too short. Try again.")}else{$.ajax({type:"POST",url:"open.php",dataType:"json",data:{pin:e},success:function(e,t,n){if(e.status=="okay"){showAlert("alert-success",e.msg)}else{showAlert("alert-error",e.msg)}},error:function(e,t,n){showAlert("alert-error",n)}})}}var lockKeyPad=false;var pinLength=6;$(document).ready(function(){var e="ontouchstart"in document.documentElement;var t=e?"touchstart":"click";$(".keypad .btn").bind(t,function(e){e.preventDefault();if(lockKeyPad)return;if($(this).attr("role")=="num"){var t=$(".pin-div").val();var n=t+$(this).text();$(".pin-div").val(n);if(n.length==pinLength){triggerOpen()}}else if($(this).attr("role")=="clear"){$(".pin-div").val("")}else if($(this).attr("role")=="other_logins"){window.location="others.php"}else if($(this).attr("role")=="personas_login"){navigator.id.request()}});$(".btn-open").bind(t,function(e){e.preventDefault();$.ajax({type:"POST",url:"open.php",dataType:"json",data:{pin:""},success:function(e,t,n){if(e.status=="okay"){showAlert("alert-success",e.msg)}else{showAlert("alert-error",e.msg)}},error:function(e,t,n){showAlert("alert-error",n)}})})})