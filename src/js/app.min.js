function showAlert(e,t){$("#alert-box").removeClass("alert-error").removeClass("alert-success").addClass(e).text(t).show();if($(".pin-div").length>0){$(".pin-div").val("").removeClass("loading").hide()}lockKeyPad=true;setTimeout(function(){$("#alert-box").hide();if($(".pin-div").length>0){$(".pin-div").show()}lockKeyPad=false},2e3)}function triggerOpen(){lockKeyPad=true;var e=$(".pin-div").val();$(".pin-div").addClass("loading");if(e.length!=pinLength){showAlert("alert-error","Door PIN is too short. Try again.")}else{$.ajax({type:"POST",url:"auth.php",dataType:"json",data:{pin:e,type:"pin"},success:function(e,t,n){if(e.status=="okay"){showAlert("alert-success",e.msg);setTimeout(function(){window.location="account.php"},2100)}else{showAlert("alert-error",e.msg)}},error:function(e,t,n){showAlert("alert-error",n)}})}}function addNum(e){if(lockKeyPad)return;var t=$(".pin-div").val();var n=t+e;$(".pin-div").val(n);if(n.length==pinLength){triggerOpen()}}var lockKeyPad=false;var pinLength=6;$(document).ready(function(){var e="ontouchstart"in document.documentElement;var t=e?"touchstart":"click";$(".keypad .btn").bind(t,function(e){e.preventDefault();if(lockKeyPad)return;if($(this).attr("role")=="num"){addNum($(this).text())}else if($(this).attr("role")=="clear"){$(".pin-div").val("")}else if($(this).attr("role")=="other_logins"){window.location="account.php"}else if($(this).attr("role")=="personas_login"){navigator.id.request()}});$(document).keyup(function(e){if(e.keyCode==49)addNum("1");if(e.keyCode==50)addNum("2");if(e.keyCode==51)addNum("3");if(e.keyCode==52)addNum("4");if(e.keyCode==53)addNum("5");if(e.keyCode==54)addNum("6");if(e.keyCode==55)addNum("7");if(e.keyCode==56)addNum("8");if(e.keyCode==57)addNum("9");if(e.keyCode==48)addNum("0")}).keydown(function(e){if(e.which==13){e.preventDefault()}if(e.keyCode==8){e.preventDefault();var t=$(".pin-div").val();var n=t.substring(0,t.length-1);$(".pin-div").val(n)}})})